#!/usr/bin/env bash
# SPDX-License-Identifier: MPL-2.0
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
cd "${ROOT_DIR}"

CHECK_MODE=0
for arg in "$@"; do
  if [[ "$arg" == "--check" ]]; then
    CHECK_MODE=1
  fi
done

targets=(src tests examples)

if [[ ${CHECK_MODE} -eq 1 ]]; then
  ruff format --check "${targets[@]}"
  black --check "${targets[@]}"
  isort --check-only "${targets[@]}"
else
  ruff format "${targets[@]}"
  ruff check --fix "${targets[@]}"
  isort "${targets[@]}"
  black "${targets[@]}"
fi
